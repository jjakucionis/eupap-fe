"use strict";function setCookie(e,t,a){var r="";if(0<a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3),r="expires="+o.toUTCString()}else r="01 Jan 1970 00:00:01 GMT";document.cookie=e+"="+t+";"+r+";path=/"}function checkInputCount(){1===$(".create-sur-rep-input--wrap > .create-sur-rep-input").length?($(".create-sur-rep-input").find(".create-sur-rep-input--remove").addClass("hidden"),remove_field.removeClass("remove-field-act")):($(".create-sur-rep-input").find(".create-sur-rep-input--remove").removeClass("hidden"),remove_field.addClass("remove-field-act"))}function formReset(e){switch(e){case"survey":$("[name=question-text]").val(""),$("[name=question-type-radio]").prop("checked",!1),$("[name=answer]").val("");break;case"contacts":$("form > div.input").find("input").each(function(){$(this).val("")}),$("form").find("input[type=checkbox]").each(function(){$(this).prop("checked",!1)});break;case"report":$("[name=report_type]").prop("checked",!1),$("[type=text]").val(""),$(".trumbowyg-textarea").val(""),$(".trumbowyg-editor").html(""),mydropzone.removeAllFiles(),$(".doc_upload").val(""),$(".browse-file-wrap").removeClass("hidden"),$(".uploaded-document-wrap").addClass("hidden")}}function openModal(e){var t=e,a=$(window).scrollTop();$("#"+t+"-modal").fadeIn(100),$("body").addClass("modal-open"),$("body").css("top",-1*a)}function closeModal(){var e=parseInt($("body").css("top"),10);$("body").removeClass("modal-open"),$("body").css("top",""),$(".modal-wrap").fadeOut(150),e&&e<0&&($(window).scrollTop(-e),$("body").css({top:0}))}function checkInputCountDoc(){2===$(".create-sur-rep-input--wrap > .create-sur-rep-input").length?remove_field_doc.removeClass("remove-field-act").addClass("hidden"):remove_field_doc.addClass("remove-field-act").removeClass("hidden")}function addComment(e){return'\n        <div class="comment-block '+(1==e.depth?"comment-block--reply":2==e.depth?"comment-block--replysub":"")+'" id='+e.item_id+'>\n            <div class="comment-content">\n                <span class="comment-name">'+e.user_username+" "+e.user_surname+"</span>\n                "+e.text01+'\n            </div>\n            <div class="comment-bottom">\n                <div class="comment-date">'+e.created_at+'</div>\n                <div class="comment-reply" href="#">Reply</div>\n            </div>\n        </div>\n        <div class="comment-form-block comment-form-block--reply" style="display: none;">\n            <div class="editorCommnent"></div>\n            <form class="comment-form" name="comment-form-'+e.item_id+'" data-endpoint='+e.endpoint+'>\n                <input type="hidden" name="csrf" value='+e.csrf+'>\n                <input type="hidden" name="replay_id" value='+e.item_id+'>\n                <input type="hidden" name="depth" value='+e.depth+'>\n                <input type="button" class="form-submit" name="new_comment" value="Send comment" data-comment-form>\n            </form>\n        </div>\n    '}function initCommentWysiwyg(){var e=$("[data-wysivyg-upload]").attr("data-csrf"),t=$("[data-wysivyg-upload]").attr("data-wysivyg-upload");$(".editorCommnent").trumbowyg({btns:[["viewHTML"],["upload"],["link"]],plugins:{upload:{serverPath:t,fileFieldName:"image",urlPropertyName:"url",data:[{name:"csrf",value:e}]}}})}function resetWysiwyg(){$(".editorCommnent").each(function(){$(this).trumbowyg("html","")})}$(document).ready(function(){console.log("ready!"),$(".loader").fadeOut("slow"),$("div.input").find("input").focus(function(){$(this).parent().find("label").addClass("act"),$(this).parent().addClass("focused")}),$("form").focusout(function(){$(this).find("input").each(function(){$(this).val()||($(this).parent().find("label").removeClass("act"),$(this).parent().removeClass("focused"))})}),$(window).scroll(function(){50<$(window).scrollTop()?$(".header").addClass("shrink"):$(".header").removeClass("shrink")}),$(".scroll-wrap").on("click",function(){$("body,html").animate({scrollTop:$(".hero").height()},800)}),$("body").on("click",'a:not([href^="#"]):not([download]):not([data-link])',function(e){var t=this;"_blank"!==$(this).attr("target")&&(e.preventDefault(),$(".loader").fadeIn(300,function(){window.location.href=$(t).attr("href")}))}),$(".mobile-menu-btn--round").click(function(){$(this).toggleClass("opened"),$(".header_menu").toggleClass("opened")}),1===$(".documents").find(".info-block").length&&$(".documents").addClass("single"),$(".text-content").find("table").wrap('<div class="table-wrap">'),$(".info-block").not(".load-more-block").not(".info-block-hide").length%2==0?$(".load-more-block").addClass("toLeft"):$(".load-more-block").addClass("toRight"),$(".editor").trumbowyg({btns:[["viewHTML"],["undo","redo"],["formatting"],["strong","em","del"],["superscript","subscript"],["table"],["link"],["insertImage"],["preformatted"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["horizontalRule"],["removeformat"],["fullscreen"]],plugins:{upload:{},table:{rows:5,columns:5,styler:"table"}}})}),$(".single-slider").slick({arrows:!1,speed:500,fade:!0}),$(".slide-left-buttton").click(function(){$(".single-slider").slick("slickPrev")}),$(".slide-right-buttton").click(function(){$(".single-slider").slick("slickNext")}),$(".radio-container input").on("click",function(){$(this).is(":checked")&&$(this).parent().parent().parent().find(".survey-submit-btn").removeClass("disabled")}),$("[data-survey-checkbox]").on("change",function(){var e=0;$(this).parent().parent().find("label").each(function(){$(this).find("input").is(":checked")&&(e=1)}),0<e?$(this).parent().parent().parent().find(".survey-submit-btn").removeClass("disabled"):$(this).parent().parent().parent().find(".survey-submit-btn").addClass("disabled")}),$(".survey-submit-btn").on("click",function(e){if(e.preventDefault(),!$(this).hasClass("disabled")){var o=$(this),t=document.querySelector("[name="+o.attr("data-form")+"]"),a=new FormData(t),r=o.attr("data-endpoint");$.ajax({url:r,data:a,processData:!1,contentType:!1,type:"POST",dataType:"json",success:function(e){if("success"==e.status){if(o.hide(),e.statictics){$("#statistics-modal .modal-header").find("h3").html(e.statictics.question),$("#statistics-modal .modal-body").html("");var t=e.statictics.answers,a=1;for(var r in t)$("#statistics-modal .modal-body").append('<div class="statisctics-row"><div class="statitics-row-label"><p>'+t[r].name+'</p></div><div class="statitics-row-content"><div class="statitics-row-content-line color'+a+'" style="width: '+t[r].persent+'%"><span>'+t[r].persent+"%</span></div></div></div>"),a++;openModal("statistics")}}else openModal("error")}})}}),$(document).on("click","[data-survey-stat]",function(e){e.preventDefault();var t=new FormData,a=$(this).attr("data-survey"),r=$(this).attr("data-survey-user"),o=$(this).attr("data-csrf"),n=$(this).attr("data-endpoint");t.append("question_id",a),t.append("user_id",r),t.append("csrf",o),$.ajax({url:n,data:t,processData:!1,contentType:!1,type:"POST",dataType:"json",success:function(e){if("success"==e.status){if(e.statictics){$("#statistics-modal .modal-header").find("h3").html(e.statictics.question),$("#statistics-modal .modal-body").html("");var t=e.statictics.answers,a=1;for(var r in t)$("#statistics-modal .modal-body").append('<div class="statisctics-row"><div class="statitics-row-label"><p>'+t[r].name+'</p></div><div class="statitics-row-content"><div class="statitics-row-content-line color'+a+'" style="width: '+t[r].persent+'%"><span>'+t[r].persent+"%</span></div></div></div>"),a++;openModal("statistics")}}else openModal("error")}})}),$("[data-delete-survey]").on("click",function(e){e.preventDefault();var t=$(this),a=t.attr("data-survey"),r=t.attr("data-csrf"),o=t.attr("data-endpoint");1==confirm("Remove that survey?")&&0<parseInt(a)&&$.ajax({url:o,data:"survey_id="+a+"&csrf="+r,type:"POST",dataType:"json",success:function(e){"success"==e.status?(openModal("success-remove"),setTimeout(function(){window.location.href=window.location.href},1500)):openModal("error")}})}),$("[data-delete-report]").on("click",function(e){e.preventDefault();var t=$(this),a=t.attr("data-report"),r=t.attr("data-csrf"),o=t.attr("data-endpoint");1==confirm("Remove that report?")&&0<parseInt(a)&&$.ajax({url:o,data:"report_id="+a+"&csrf="+r,type:"POST",dataType:"json",success:function(e){"success"==e.status?(openModal("success-remove"),setTimeout(function(){window.location.href=window.location.href},1500)):openModal("error")}})}),$(".coockie-agree").on("click",function(e){e.preventDefault(),$(".coockie").fadeOut(),setCookie("acceptCookie","true",365)}),$(".coockie-close").on("click",function(){$(".coockie").fadeOut(),setCookie("acceptCookie","true",365)}),$("[data-load-more]").on("click",function(e){e.preventDefault();var t=$(this).attr("data-class");$(".info-block-list").children("."+t).fadeIn(400),$(".load-more-block").hide()}),$(window).on("ajaxError",function(e,t,a,r,o){if(e.preventDefault(),void 0!==e.target.id&&"singInForm"==e.target.id){$("#error-modal").find(".modal-body").html("<p>"+a+"</p>"),$("#error-modal").fadeIn(100),$("body").addClass("modal-open"),$("html").addClass("modal-open")}});var validation=function(){var e=0,t=!1,a=$('[name="email"]').val();""==a||/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)?$('[name="email"]').parent().removeClass("alrt2"):($('[name="email"]').parent().addClass("alrt2"),e++),$("form input[required]").each(function(){$(this).val()?$(this).parent().removeClass("alrt"):($(this).parent().addClass("alrt"),e++)}),$("form").find("input[type=checkbox]").each(function(){$(this).is(":checked")?$(".checkmark").removeClass("alrt"):($(".checkmark").addClass("alrt"),e++)}),(t=!(0<e))?$(".alert--group").removeClass("show"):$(".alert--group").addClass("show"),t&&$.ajax({type:"POST",url:$("[data-contact-form]").attr("data-action"),data:{firstname:$('[name="firstname"]').val(),email:$('[name="email"]').val(),phone:$('[name="phone"]').val(),interest:$('[name="interest"]').val(),acceptance:$('[name="acceptance"]').val(),qcheck:$('[name="qcheck"]').val()},success:function(e){openModal(JSON.parse(e).status),formReset("contacts")},error:function(e){console.log("Error",e),openModal(resp.status)}})},max_fields=5,wrapper=$(".create-sur-rep-input--wrap"),add_button=$("[data-add-aditional] > p"),remove_field=$("[data-remove-field]"),max_fields_counter=1;$(add_button).on("click",function(e){e.preventDefault(),max_fields_counter<max_fields&&(max_fields_counter++,$(wrapper).append('<div class="create-sur-rep-input cont"><input type="text" maxlength="100" name="answer" placeholder="Enter answer text" required><div class="create-sur-rep-input--remove nomob"></div></div>').show("slow")),checkInputCount()}),$(wrapper).on("click",".create-sur-rep-input--remove",function(e){e.preventDefault(),$(this).parent("div").remove(),max_fields_counter--,checkInputCount()}),$("body").on("click",".create-sur-rep-input > input",function(e){$(".create-sur-rep-input > input").removeClass("focusedToRemove"),$(this).addClass("focusedToRemove")}),$(remove_field).on("click",function(e){e.preventDefault();var t=$(".focusedToRemove");$(this).hasClass("remove-field-act")&&t&&($(t).parent("div").remove(),max_fields_counter--),checkInputCount()}),$(document).ready(function(){checkInputCount()});var mydropzone,surveyValid=function(){var e=0,t=!1;if($(".create-survey-form input[required]").each(function(){$(this).val()?$(this).closest(".cont").removeClass("error"):($(this).closest(".cont").addClass("error"),e++)}),$(".create-survey-form textarea[required]").each(function(){$(this).val()?$(this).closest(".cont").removeClass("error"):($(this).closest(".cont").addClass("error"),e++)}),$(".create-survey-form input[type=radio]").is(":checked")?$(".create-sur-rep-type").removeClass("error"):($(".create-sur-rep-type").addClass("error"),e++),(t=!(0<e))?($(".create-survey-form").removeClass("error"),$(".alert-msg").hide()):($(".create-survey-form").addClass("error"),$(".alert-msg").show()),t){$(".create-sur-rep-submit").addClass("loading"),$(".sur-rep-submit").attr("disabled",!0);var a=[];$(".create-sur-rep-input").each(function(e){var t=$(".create-sur-rep-input").eq(e).find("input").val();a.push(t)});var r=[];$(".create-sur-rep-input").each(function(e){var t=$(".create-sur-rep-input").eq(e).find("input").eq(1).val();r.push(t)}),$.ajax({type:"POST",url:$(".create-survey-form").attr("data-endpoint"),data:{csrf:$('input[name="csrf"]').val(),questionId:$('input[name="question_id"]').val(),questionText:$('textarea[type="text"]').val(),questionType:$("input[name='question-type-radio']:checked").val(),questions:a,questionsKeys:r},success:function(e){var t=JSON.parse(e);$(".create-sur-rep-submit").removeClass("loading"),$(".sur-rep-submit").attr("disabled",!1),openModal(t),formReset("survey")},error:function(e){console.log("Error",e),$(".create-sur-rep-submit").removeClass("loading"),$(".sur-rep-submit").attr("disabled",!1),openModal("error")}})}},scrollDistance=void 0,removedFiles=[],removedDocFiles=[],wrapperDoc=$(".create-sur-rep-input--wrap"),addbuttonDoc=$("[data-add-aditional-doc] > p"),max_fields_doc=10,remove_field_doc=$("[data-remove-field-doc]"),max_fields_counter_doc=1;$(addbuttonDoc).on("click",function(e){e.preventDefault(),max_fields_counter_doc<max_fields_doc&&(max_fields_counter_doc++,$(wrapperDoc).append('<div class="create-sur-rep-input upload-document-wrap cont"><input type="text" maxlength="100" id="first-document-title" name="document-title01[]" placeholder="Enter document title"><div class="browse-file-wrap center-vertical"><span class="browse-file" data-trigger="doc">Browse file</span></div><div class="uploaded-document-wrap hidden"><div class="uploaded-document-name center-vertical"></div><div class="create-sur-rep-input--remove-doc"></div></div><input id="first-document-file" type="file" class="doc_upload hidden" name="file01[]" accept="application/pdf,.doc,.docx,.rar,application/zip"></div>').show("slow")),checkInputCountDoc()}),$(remove_field_doc).on("click",function(e){e.preventDefault();var t=$(".create-sur-rep-input--wrap > .create-sur-rep-input").length;$(this).hasClass("remove-field-act")&&2<t&&($(".create-sur-rep-input--wrap > .create-sur-rep-input").last().remove(),max_fields_counter--),checkInputCountDoc()}),$(document).ready(function(){checkInputCountDoc(),$("#datepicker-from").datepicker({constrainInput:!0,dateFormat:"yy/mm/dd"}),$("#datepicker-to").datepicker({constrainInput:!0,dateFormat:"yy/mm/dd"}),$("#img_dropzone").length&&(mydropzone=new Dropzone("#img_dropzone",{url:"./endpoint/createReportForm",uploadMultiple:!0,acceptedFiles:"image/*",previewsContainer:"#drag-drop-preview-cont",hiddenInputContainer:".create-report-form",autoProcessQueue:!1,thumbnailWidth:155,thumbnailHeight:104,addRemoveLinks:!0,maxFiles:5,maxFilesize:2,drop:function(){console.log("imestas")},init:function(){var e=$("[data-existing-img]");if(1==e.length){var t=JSON.parse(e.attr("data-existing-img"));if(t)for(var a=0;a<t.length;a++){var r={name:t[a].name,size:t[a].size,type:t[a].type,status:Dropzone.ADDED,accepted:!0,kind:"image"};this.files.push(r),this.emit("addedfile",r),this.emit("thumbnail",r,t[a].url),this.emit("complete",r),0}}this.on("error",function(e,t){alert(t),this.removeFile(e)}),this.on("removedfile",function(e){removedFiles.push(e.name)})}}))}),$(document).on("click",".browse-file",function(e){var t=$(this).attr("data-trigger");$(this).parent().parent().find("."+t+"_upload").trigger("click")}),$(document).ready(function(){$(document).on("change",'input[type="file"]',function(){var e=$(this)[0].files[0].name;e&&($(this).closest(".upload-document-wrap").find(".browse-file-wrap").addClass("hidden"),$(this).closest(".upload-document-wrap").find(".uploaded-document-wrap").removeClass("hidden"),$(this).closest(".upload-document-wrap").find(".uploaded-document-name").text(e))}),$(document).on("click",".create-sur-rep-input--remove-doc",function(){$(this).closest(".upload-document-wrap").find(".doc_upload").val(""),$(this).parent().addClass("hidden"),$(this).closest(".upload-document-wrap").find(".browse-file-wrap").removeClass("hidden"),removedDocFiles.push($(this).prev("div:first").find("a").text())})});var reportValid=function(){var e=0,t=!1;if($(".create-report-form input[required]").each(function(){$(this).val()?$(this).closest(".cont").removeClass("error"):($(this).closest(".cont").addClass("error"),e++)}),$("[name=report_type]:checked").length?$("[data-radio]").removeClass("error"):($("[data-radio]").addClass("error"),e++),(t=!(0<e))?($(".create-report-form").removeClass("error"),$(".alert-msg").fadeOut()):($(".create-report-form").addClass("error"),$(".alert-msg").fadeIn()),t){$(".create-sur-rep-submit").addClass("loading"),$(".sur-rep-submit").attr("disabled",!0);for(var a=mydropzone.getQueuedFiles(),r=document.querySelector("[name=report-form]"),o=new FormData(r),n=0;n<a.length;n++)o.append(a[n].name,a[n]);o.append("removed",removedFiles),o.append("removedDoc",removedDocFiles),o.append("wysiwyg_data01",$(".trumbowyg-textarea").eq(0).val()),o.append("wysiwyg_data02",$(".trumbowyg-textarea").eq(1).val()),$.ajax({type:"POST",url:$(".create-report-form").attr("data-endpoint"),contentType:!1,processData:!1,dataType:"json",data:o,success:function(e){"success"==e.status?(openModal(e.status),setTimeout(function(){window.location.href=e.redirect},1500),formReset(),$(".create-sur-rep-submit").removeClass("loading"),$(".sur-rep-submit").attr("disabled",!1)):(console.log("Error: ",e.message),$("[data-error-msg]").html("<p>Error: "+e.message+"</p>"),$(".create-sur-rep-submit").removeClass("loading"),$(".sur-rep-submit").attr("disabled",!1),openModal("error"))},error:function(e){console.log("Error: ",e.responseText),$("[data-error-msg]").html("<p>Error: "+e.responseText+"</p>"),$(".create-sur-rep-submit").removeClass("loading"),$(".sur-rep-submit").attr("disabled",!1),openModal("error")}})}};$(document).ready(function(){initCommentWysiwyg()}),$(document).on("click",".comment-reply",function(e){e.preventDefault,$(this).parent().parent().next(".comment-form-block--reply").slideToggle()}),$(document).on("click","[data-comment-form]",function(e){e.preventDefault();var a=$(this),t=0,r=$(this).parent().attr("name"),o=document.querySelector("[name="+r+"]"),n=new FormData(o);n.append("comment",$(this).parent().parent().find(".trumbowyg-textarea").val());var s=n.get("comment");0!=s.length&&null!=s||t++,!(0<t)&&$.ajax({type:"POST",url:o.getAttribute("data-endpoint"),contentType:!1,processData:!1,dataType:"json",data:n,success:function(e){if("success"==e.status){openModal(e.status),formReset();var t=addComment(e.data);a.parent().parent().after(t),initCommentWysiwyg(),resetWysiwyg(),$("[name=comment]").val(""),$("[name=file01]").val(""),$(".comment-file").remove(),0<e.data.depth&&(o.parentElement.style.display="none")}else console.log("Error: ",e.message),$("[data-error-msg]").html("<p>Error: "+e.message+"</p>"),openModal("error")},error:function(e){console.log("Error: ",e.responseText),$("[data-error-msg]").html("<p>Error: "+e.responseText+"</p>"),openModal("error")}})});var signValid=function(){var e=0;$("#singInForm input").each(function(){$(this).val()?$(this).closest(".cont").removeClass("alrt"):($(this).closest(".cont").addClass("alrt"),e++)})};$("#singInForm input").on("input",function(){$(this).val()?$(this).closest(".cont").removeClass("alrt"):$(this).closest(".cont").addClass("alrt")});